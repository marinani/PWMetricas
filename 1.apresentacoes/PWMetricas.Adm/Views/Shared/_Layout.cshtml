@using System.Security.Claims;

@{
	var userName = User.Identity.IsAuthenticated ? User.FindFirst(ClaimTypes.Name)?.Value : "Visitante";
	var userPerfil = User.Identity.IsAuthenticated ? User.FindFirst("Perfil")?.Value : "Sem Perfil";
}

<!DOCTYPE html>
<html lang="pt-BR">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>PW Métricas</title>
	<script type="importmap"></script>
	<link rel="stylesheet" href="~/css/adminlte.css" />
	<link rel="icon" href="/images/icon_pwmetricas.svg" type="image/x-icon">


	<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/overlayscrollbars@2.10.1/styles/overlayscrollbars.min.css"
	integrity="sha256-tZHrRjVqNSRyWg2wbppGnT833E/Ys0DHWGwT04GiqQg="
	crossorigin="anonymous" />
	<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
	integrity="sha256-9kPW/n5nn53j4WMRYAxe9c1rCY96Oogo/MKSVdKzPmI="
	crossorigin="anonymous" />



</head>
<body class="layout-fixed sidebar-expand-lg bg-body-tertiary">

	<!--begin::App Wrapper-->
	<div class="app-wrapper">
		<!--begin::Header-->
		<nav class="app-header navbar navbar-expand bg-body">
			<div class="container-fluid">
				<!-- Botão de menu lateral -->
				<ul class="navbar-nav">
					<li class="nav-item">
						<a class="nav-link" data-lte-toggle="sidebar" href="#" role="button">
							<i class="bi bi-list iconMenuRosa"></i>
						</a>
					</li>
				</ul>
				<!-- Logo centralizada -->
				<div class="navbar-brand logo-container">
					<a href="/Home/Index">
						<img src="/images/logopwmetricas.png" alt="Logo PW Métricas" class="logo-center img-fluid">
					</a>
				</div>
				<!-- Botões à direita -->
				<ul class="navbar-nav ms-auto">
					<li class="nav-item">
						<button id="theme-toggle" class="btn btn-outline-secondary">
							<i id="theme-icon" class="bi bi-sun"></i>
						</button>
					</li>
					<li class="nav-item dropdown user-menu">
						<a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
							<img src="/images/user2-160x160.jpg"
							class="user-image rounded-circle shadow"
							alt="Imagem do usuário" />

						</a>
						<ul class="dropdown-menu dropdown-menu-lg dropdown-menu-end">
							<li class="user-header text-bg-primary">
								<img src="/images/user2-160x160.jpg"
								class="rounded-circle shadow"
								alt="Imagem do usuário" />
								<p>
									@userName
									<small>@userPerfil</small>
								</p>
							</li>

							<li class="user-footer">
								<a href="#" class="btn btn-default btn-flat">Meu Perfil</a>
								<a href="/Logout" class="btn btn-default btn-flat float-end">Sair</a>
							</li>

						</ul>
					</li>
				</ul>
			</div>
		</nav>
		<aside class="app-sidebar bg-body-secondary shadow" data-bs-theme="dark">
			<div class="sidebar-wrapper">
				<nav class="mt-2">
					<ul class="nav sidebar-menu flex-column"
					data-lte-toggle="treeview"
					role="menu"
					data-accordion="false">

						<li class="nav-item">
							<a href="/Home/Index" class="nav-link">
								<i class="nav-icon bi bi-house"></i>
								<p>Home</p>
							</a>
						</li>
						@if (userPerfil == "Administrador" || userPerfil == "Gerente")
						{

							<li class="nav-item">
								<a href="#" class="nav-link">
									<i class="nav-icon bi bi-person-fill"></i>
									<p>
										Clientes
										<i class="nav-arrow bi bi-chevron-right"></i>
										
									</p>
								</a>
								<ul class="nav nav-treeview">
									<li class="nav-item">
										<a href="/Cliente/Consulta" class="nav-link">
											<i class="nav-icon bi bi-arrow-right"></i>
											<p>Cadastro</p>
										</a>
									</li>
									<li class="nav-item">
										<a href="/Cliente/Consulta" class="nav-link">
											<i class="nav-icon bi bi-arrow-right"></i>
											<p>Pesquisa</p>
										</a>
									</li>
								</ul>
							</li>

							<li class="nav-item">
								<a href="#" class="nav-link">
									<i class="nav-icon bi bi-list-check"></i>
									<p>
										Cadastros
										<i class="nav-arrow bi bi-chevron-right"></i>
									</p>
								</a>
								<ul class="nav nav-treeview">
									<li class="nav-item">
										<a href="/Usuario/Consulta" class="nav-link">
											<i class="nav-icon bi bi-arrow-right"></i>
											<p>Vendedor</p>
										</a>
									</li>
									<li class="nav-item">
										<a href="/Canal/Consulta" class="nav-link">
											<i class="nav-icon bi bi-arrow-right"></i>
											<p>Canal</p>
										</a>
									</li>
									<li class="nav-item">
										<a href="/Origem/Consulta" class="nav-link">
											<i class="nav-icon bi bi-arrow-right"></i>
											<p>Origem</p>
										</a>
									</li>
									<li class="nav-item">
										<a href="/Produto/Consulta" class="nav-link">
											<i class="nav-icon bi bi-arrow-right"></i>
											<p>Produto</p>
										</a>
									</li>
									<li class="nav-item">
										<a href="/Tamanho/Consulta" class="nav-link">
											<i class="nav-icon bi bi-arrow-right"></i>
											<p>Tamanho</p>
										</a>
									</li>
									
								</ul>
							</li>


							<li class="nav-item">
								<a href="#" class="nav-link">
									<i class="nav-icon bi bi-shop"></i>
									<p>
										Filiais
										<i class="nav-arrow bi bi-chevron-right"></i>
									</p>
								</a>
								<ul class="nav nav-treeview">
									<li class="nav-item">
										<a href="/Loja/Consulta" class="nav-link">
											<i class="nav-icon bi bi-arrow-right"></i>
											<p>Pesquisa</p>
										</a>
									</li>
									<li class="nav-item">
										<a href="/Loja/Nova" class="nav-link">
											<i class="nav-icon bi bi-arrow-right"></i>
											<p>Nova Filial</p>
										</a>
									</li>
								</ul>
							</li>
							
						}


						@if (userPerfil == "Vendedor")
						{
							<li class="nav-item">
								<a href="/Atendimento/Consulta" class="nav-link">
									<i class="nav-icon bi bi-headset"></i>
									<p>Minhas Vendas</p>
								</a>
							</li>

							
						}
						

					</ul>
				</nav>
			</div>
		</aside>
		<main class="app-main">
			@RenderBody()
		</main>
	</div>


	<script src="https://cdn.jsdelivr.net/npm/overlayscrollbars@2.10.1/browser/overlayscrollbars.browser.es6.min.js"
			integrity="sha256-dghWARbRe2eLlIJ56wNB+b760ywulqK3DzZYEpsg2fQ="
			crossorigin="anonymous"></script>
	<script src="/js/popper.min.js"
			integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
			crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
			integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
			crossorigin="anonymous"></script>
	<script src="~/js/adminlte.js"></script>
	<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

	@await RenderSectionAsync("Scripts", required: false)
	<script>
		document.addEventListener("DOMContentLoaded", function () {
			const themeToggle = document.getElementById("theme-toggle");
			const themeIcon = document.getElementById("theme-icon");
			const currentTheme = localStorage.getItem("theme") || "light";

			// Aplica o tema salvo no localStorage
			document.documentElement.setAttribute("data-bs-theme", currentTheme);
			themeIcon.className = currentTheme === "dark" ? "bi bi-sun" : "bi bi-moon";

			// Alterna o tema ao clicar no botão
			themeToggle.addEventListener("click", function () {
				const newTheme = document.documentElement.getAttribute("data-bs-theme") === "dark" ? "light" : "dark";
				document.documentElement.setAttribute("data-bs-theme", newTheme);
				localStorage.setItem("theme", newTheme);
				themeIcon.className = newTheme === "dark" ? "bi bi-sun" : "bi bi-moon";
			});
		});
	</script>
</body>
</html>
