@using PWMetricas.Aplicacao.Modelos
@using PWMetricas.Aplicacao.Modelos.Atendimento
@model AtendimentoConsultaViewModel

<div class="app-content-header">
    <div class="container-fluid">
        <h3 class="mb-0">Atendimentos</h3>
    </div>
</div>

<div class="app-content">
    <div class="container-fluid">
        <!-- Formulário de Filtro -->
        <form asp-action="Consulta" method="get">
            <div class="row">
                <div class="col-md-3">
                    <label for="UsuarioId">Vendedor</label>
                    <select asp-for="Filtro.UsuarioId" asp-items="ViewBag.Vendedores" class="form-control">
                        <option value="">Selecione um vendedor</option>
                    </select>
                </div>
                <div class="col-md-3">
                    <label for="LojaId">Loja</label>
                    <select asp-for="Filtro.LojaId" asp-items="ViewBag.Lojas" class="form-control">
                        <option value="">Selecione uma filial</option>
                    </select>
                </div>
                <div class="col-md-3">
                    <label>&nbsp;</label>
                    <button type="submit" class="btn btn-primary w-100">Filtrar</button>
                </div>
            </div>
        </form>

        <!-- Tabela de Atendimentos com Status 1 -->
        <h4 class="mt-4">Atendimentos (Status 1)</h4>
        <div id="lista-atendimento">
            @await Html.PartialAsync("_ListaAtendimento", Model)
        </div>

        <!-- Tabela de Atendimentos com Status 2 -->
        <h4 class="mt-4">Orçamentos (Status 2)</h4>
        <div id="lista-orcamento">
            @await Html.PartialAsync("_ListaOrcamento", Model)
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script src="/js/atendimento/consulta.js"></script>
}
